
#include <machine.h>
#include "types.h"
#include "SPRINTF.h"
#include "SWANMAIN.h"
#include "SYSTEM.h"
#include "SWAN_L_C.h"

void far *ssprintf = hsprintf;

const char far hex_num_tbl[] = "0123456789abcdef";
const char far HEX_num_tbl[] = "0123456789ABCDEF";
const u32 far dec_div_tbl[] = {100000,10000,1000,100,10,1};
const u32 far hex_div_tbl[] = {0x10000,0x1000,0x100,0x10,1};
const u32 far bin_div_tbl[] = {0x10000,0x8000,0x4000,0x2000,0x1000,0x800,0x400,0x100,0x80,0x40,0x20,0x10,0x8,0x4,0x2,0x1};

	
void print(u16 unk, u16 unk2, u16 unk3, u8 *unk4, u8 far font[])
{
	/*u16 width;
	u16 ptr;
	u16 *map;

	width = *(u16 far *)(font + 0x0E);
	ptr = *(u16 far *)vram;
	map = map_tbl[unk3];
	
	for (; *unk4 != 0; unk4++)
	{
		map[unk2 * 0x20 + unk] = *(u16 far *)(font + (*(u8 *)unk4 * 2 -0x40) + width + 0x800);
		unk++;
	}*/
	ASM_INLINE("PUSH	BP");
	ASM_INLINE("MOV	BP,SP");
	ASM_INLINE("SUB	SP,0x0008");
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("PUSH	BX");
	ASM_INLINE("MOV	DI,CX");
	ASM_INLINE("MOV	SI,DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("MOV	CX,[BP+0x06].W");
	ASM_INLINE("MOV	CX,[BP+0x08].W");
	ASM_INLINE("MOV	DX,CX");
	ASM_INLINE("XOR	CX,CX");
	ASM_INLINE("XOR	CX,CX");
	ASM_INLINE("MOV	CX,DX");
	ASM_INLINE("XOR	DX,DX");
	ASM_INLINE("MOV	SI,[BP+0x06].W");
	ASM_INLINE("LES	BX,[BP+0x06]");
	ASM_INLINE("ADD	SI,ES:[BX+0x0E].W");
	ASM_INLINE("XOR	BX,BX");
	ASM_INLINE("OR	DX,SI");
	ASM_INLINE("OR	CX,BX");
	ASM_INLINE("MOV	[BP-0x04].W,DX");
	ASM_INLINE("MOV	[BP-0x02].W,CX");
	ASM_INLINE("MOV	DX,[0x00F8].W");
	ASM_INLINE("XOR	CX,CX");
	ASM_INLINE("MOV	CX,DX");
	ASM_INLINE("XOR	DX,DX");
	ASM_INLINE("SHL	DI,1");
	//ASM_INLINE("MOV	DI,[DI+0x0060].W");
	ASM_OP4(0x8B,0xBD,0x60,0x00);
	ASM_INLINE("XOR	SI,SI");
	ASM_INLINE("OR	DX,DI");
	ASM_INLINE("OR	CX,SI");
	ASM_INLINE("MOV	[BP-0x08].W,DX");
	ASM_INLINE("MOV	[BP-0x06].W,CX");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	BX");
	ASM_INLINE("JMP	_805B7");
ASM_INLINE("_80589:");
	ASM_INLINE("PUSH	BX");
	ASM_INLINE("LES	BX,[BP-0x04]");
	ASM_INLINE("MOV	CL,[SI].B");
	ASM_INLINE("XOR	CH,CH");
	ASM_INLINE("SHL	CX,1");
	ASM_INLINE("SUB	CX,0x0040");
	ASM_INLINE("ADD	BX,CX");
	ASM_INLINE("MOV	DX,0x0800");
	ASM_INLINE("ADD	DX,ES:[BX].W");
	ASM_INLINE("POP	BX");
	ASM_INLINE("PUSH	BX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("MOV	SI,BX");
	ASM_INLINE("MOV	CL,0x05");
	ASM_INLINE("SHL	SI,CL");
	ASM_INLINE("ADD	SI,AX");
	ASM_INLINE("SHL	SI,1");
	ASM_INLINE("LES	BX,[BP-0x08]");
	ASM_INLINE("ADD	BX,SI");
	ASM_INLINE("MOV	ES:[BX].W,DX");
	ASM_INLINE("INC	AX");
	ASM_INLINE("POP	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("POP	BX");
ASM_INLINE("_805B7:");
	ASM_INLINE("CMP	[SI].B,0x00");
	ASM_INLINE("JNZ	_80589");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
	ASM_INLINE("MOV	SP,BP");
	ASM_INLINE("POP	BP");
}

void bmp_print()
{
	ASM_INLINE("PUSH	BP");
	ASM_INLINE("MOV	BP,SP");
	ASM_INLINE("SUB	SP,0x0016");
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("CMP	[BP+0x06].W,0x0000");
	ASM_INLINE("JZ	_805D7");
	ASM_INLINE("MOV	SI,[BP+0x06].W");
	ASM_INLINE("JMP	_805DA");
ASM_INLINE("_805D7:");
	ASM_INLINE("LEA	SI,[BP-0x16].B");
ASM_INLINE("_805DA:");
	ASM_INLINE("MOV	[SI].W,CX");
	ASM_INLINE("MOV	CX,AX");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("MOV	[SI+0x02].W,CX");
	ASM_INLINE("MOV	CX,BX");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("SAR	CX,1");
	ASM_INLINE("MOV	[SI+0x04].W,CX");
	ASM_INLINE("SAR	AX,1");
	ASM_INLINE("SAR	AX,1");
	ASM_INLINE("SAR	AX,1");
	ASM_INLINE("MOV	[SI+0x06].W,AX");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("MOV	[SI+0x08].W,BX");
	ASM_INLINE("MOV	[SI+0x0A].W,DX");
	ASM_INLINE("MOV	[SI+0x0C].W,0x0000");
	ASM_INLINE("MOV	[SI+0x0E].W,0x0000");
	ASM_INLINE("CMP	[BP+0x06].W,0x0000");
	ASM_INLINE("JNZ	_8062F");
	ASM_INLINE("MOV	[SI+0x10].W,0x0000");
	ASM_INLINE("MOV	[SI+0x12].W,0x0000");
	ASM_INLINE("MOV	[SI+0x14].W,0x0000");
	ASM_INLINE("MOV	AX,SI");
	ASM_INLINE("CALLF	bmp_print_next_, SEG bmp_print_next_");
	ASM_INLINE("JMP	_80634");
ASM_INLINE("_8062F:");
	ASM_INLINE("MOV	[SI+0x10].W,0x0001");
ASM_INLINE("_80634:");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	CX");
	ASM_INLINE("MOV	SP,BP");
	ASM_INLINE("POP	BP");
}

void bmp_print_next()
{
	font_put2XY; //Force include
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("MOV	SI,AX");
	ASM_INLINE("MOV	DX,[SI].W");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_80645:");
	ASM_INLINE("INC	[SI].W");
	ASM_INLINE("MOV	BX,[SI].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	BL,[BX].B");
	ASM_INLINE("XOR	BH,BH");
	ASM_INLINE("CMP	BX,0x0006");
	ASM_INLINE("JZ	_806C0");
	ASM_INLINE("CMP	BX,0x0005");
	ASM_INLINE("JZ	_806C0");
	ASM_INLINE("CMP	BX,0x0004");
	ASM_INLINE("JZ	_806C0");
	ASM_INLINE("CMP	BX,0x0003");
	ASM_INLINE("JZ	_806C0");
	ASM_INLINE("CMP	BX,0x0001");
	ASM_INLINE("JZ	_806C0");
	ASM_INLINE("CMP	BX,0x000A");
	ASM_INLINE("JZ	_806AA");
	ASM_INLINE("CMP	BX,0x000B");
	ASM_INLINE("JZ	_806A2");
	ASM_INLINE("CMP	BX,0x000C");
	ASM_INLINE("JZ	_8069A");
	ASM_INLINE("CMP	BX,0x000F");
	ASM_INLINE("JZ	_80692");
	ASM_INLINE("CMP	BX,0x000E");
	ASM_INLINE("JZ	_8068A");
	ASM_INLINE("CMP	BX,0x000D");
	ASM_INLINE("JNZ	_80688");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_80688:");
	ASM_INLINE("JMP	_806EF");
ASM_INLINE("_8068A:");
	ASM_INLINE("MOV	[SI+0x0E].W,0x0000");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_80692:");
	ASM_INLINE("MOV	[SI+0x0E].W,0x0001");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_8069A:");
	ASM_INLINE("MOV	[SI+0x0C].W,0x0000");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_806A2:");
	ASM_INLINE("MOV	[SI+0x0C].W,0x0001");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_806AA:");
	ASM_INLINE("INC	[SI+0x04].W");
	ASM_INLINE("MOV	BX,SI");
	ASM_INLINE("MOV	AX,[BX+0x02].W");
	ASM_INLINE("MOV	[SI+0x06].W,AX");
	ASM_INLINE("MOV	BX,SI");
	ASM_INLINE("MOV	AX,[BX+0x04].W");
	ASM_INLINE("MOV	[SI+0x08].W,AX");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_806C0:");
	ASM_INLINE("MOV	CX,[SI+0x12].W");
	ASM_INLINE("MOV	AX,[SI+0x14].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_806CE");
	ASM_INLINE("CMP	CX,0x0000");
ASM_INLINE("_806CE:");
	ASM_INLINE("JNZ	_806D3");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_806D3:");
	ASM_INLINE("INC	[SI].W");
	ASM_INLINE("MOV	DI,[SI].W");
	ASM_INLINE("DEC	DI");
	ASM_INLINE("MOV	AL,[DI].B");
	ASM_INLINE("XOR	AH,AH");
	ASM_INLINE("MOV	CL,0x08");
	ASM_INLINE("SHL	BX,CL");
	ASM_INLINE("OR	BX,AX");
	ASM_INLINE("MOV	AX,BX");
	ASM_INLINE("CALLF	[SI+0x12].D");
	ASM_INLINE("TEST	AX,AX");
	ASM_INLINE("JZ	_8075A");
	ASM_INLINE("MOV	[SI].W,DX");
	ASM_INLINE("JMP	_8075A");
ASM_INLINE("_806EF:");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("CMP	[SI+0x0E].W,0x0000");
	ASM_INLINE("JZ	_8070C");
	ASM_INLINE("CMP	BX,0x0080");
	ASM_INLINE("JL	_8070C");
	ASM_INLINE("CMP	BX,0x00C0");
	ASM_INLINE("JL	_80707");
	ASM_INLINE("MOV	AX,0x0020");
	ASM_INLINE("JMP	_8070A");
ASM_INLINE("_80707:");
	ASM_INLINE("MOV	AX,0xFFE0");
ASM_INLINE("_8070A:");
	ASM_INLINE("ADD	BX,AX");
ASM_INLINE("_8070C:");
	ASM_INLINE("MOV	CX,0x0000");
	ASM_INLINE("MOV	AX,0xA378");
	ASM_INLINE("PUSH	AX");
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	[SI+0x0A].W");
	ASM_INLINE("PUSH	[SI+0x08].W");
	ASM_INLINE("INC	[SI+0x06].W");
	ASM_INLINE("MOV	AX,[SI+0x06].W");
	ASM_INLINE("DEC	AX");
	ASM_INLINE("PUSH	AX");
	ASM_INLINE("MOV	AX,BX");
	ASM_INLINE("AND	AX,0x000F");
	ASM_INLINE("MOV	CX,[SI+0x0C].W");
	ASM_INLINE("SHL	CX,1");
	ASM_INLINE("SHL	CX,1");
	ASM_INLINE("SHL	CX,1");
	ASM_INLINE("SHL	CX,1");
	ASM_INLINE("ADD	AX,CX");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("SAR	BX,1");
	ASM_INLINE("AND	BX,0x000F");
	ASM_INLINE("MOV	CX,0x0001");
	ASM_INLINE("MOV	DX,0x0001");
	ASM_INLINE("CALLF	font_put2XY_, SEG font_put2XY_");
	ASM_INLINE("ADD	SP,0x000A");
	ASM_INLINE("CMP	[SI+0x10].W,0x0000");
	ASM_INLINE("POP	DX");
	ASM_INLINE("JZ	_8075A");
	ASM_INLINE("MOV	AX,0xFFFF");
	ASM_INLINE("JMP	_80766");
ASM_INLINE("_8075A:");
	ASM_INLINE("MOV	BX,[SI].W");
	ASM_INLINE("CMP	[BX].B,0x00");
	ASM_INLINE("JZ	_80764");
	ASM_INLINE("JMP	_80645");
ASM_INLINE("_80764:");
	ASM_INLINE("XOR	AX,AX");
ASM_INLINE("_80766:");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
}

void hsprintf(char *fmt, ...)
{
	ASM_INLINE("PUSH	BP");
	ASM_INLINE("MOV	BP,SP");
	ASM_INLINE("SUB	SP,0x0010");
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("MOV	AX,[BP+0x08].W");
	ASM_INLINE("MOV	[0x094A].W,AX");
	ASM_INLINE("MOV	AX,[BP+0x06].W");
	ASM_INLINE("MOV	[0x094C].W,AX");
	ASM_INLINE("LEA	SI,[BP+0x0A].B");
ASM_INLINE("_80784:");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("CMP	AL,0x25");
	ASM_INLINE("JZ	_80791");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80791:");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	[BP-0x04].W,0xFFFF");
	ASM_INLINE("MOV	[BP-0x02].W,0x0000");
	ASM_INLINE("MOV	[BP-0x08].W,0xFFFF");
	ASM_INLINE("MOV	[BP-0x06].W,0x0000");
	ASM_INLINE("MOV	[BP-0x0C].W,0xFFFF");
	ASM_INLINE("MOV	[BP-0x0A].W,0x0000");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("XOR	AH,AH");
	ASM_INLINE("XOR	BX,BX");
	ASM_INLINE("MOV	[BP-0x10].W,AX");
	ASM_INLINE("MOV	[BP-0x0E].W,BX");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_807D6");
	ASM_INLINE("CMP	BX,0x0058");
ASM_INLINE("_807D6:");
	ASM_INLINE("JNZ	_807DB");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_807DB:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_807E3");
	ASM_INLINE("CMP	BX,0x0078");
ASM_INLINE("_807E3:");
	ASM_INLINE("JNZ	_807E8");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_807E8:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_807F0");
	ASM_INLINE("CMP	BX,0x0044");
ASM_INLINE("_807F0:");
	ASM_INLINE("JNZ	_807F5");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_807F5:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_807FD");
	ASM_INLINE("CMP	BX,0x0064");
ASM_INLINE("_807FD:");
	ASM_INLINE("JNZ	_80802");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80802:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8080A");
	ASM_INLINE("CMP	BX,0x0053");
ASM_INLINE("_8080A:");
	ASM_INLINE("JNZ	_8080F");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_8080F:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80817");
	ASM_INLINE("CMP	BX,0x0073");
ASM_INLINE("_80817:");
	ASM_INLINE("JNZ	_8081C");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_8081C:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80824");
	ASM_INLINE("CMP	BX,0x0042");
ASM_INLINE("_80824:");
	ASM_INLINE("JNZ	_80829");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80829:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80831");
	ASM_INLINE("CMP	BX,0x0062");
ASM_INLINE("_80831:");
	ASM_INLINE("JNZ	_80836");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80836:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8083E");
	ASM_INLINE("CMP	BX,0x0043");
ASM_INLINE("_8083E:");
	ASM_INLINE("JNZ	_80843");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80843:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8084B");
	ASM_INLINE("CMP	BX,0x0063");
ASM_INLINE("_8084B:");
	ASM_INLINE("JNZ	_80850");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80850:");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("MOV	[BP-0x0C].W,BX");
	ASM_INLINE("MOV	[BP-0x0A].W,AX");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("XOR	AH,AH");
	ASM_INLINE("XOR	BX,BX");
	ASM_INLINE("MOV	[BP-0x10].W,AX");
	ASM_INLINE("MOV	[BP-0x0E].W,BX");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8087F");
	ASM_INLINE("CMP	BX,0x0058");
ASM_INLINE("_8087F:");
	ASM_INLINE("JNZ	_80884");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80884:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8088C");
	ASM_INLINE("CMP	BX,0x0078");
ASM_INLINE("_8088C:");
	ASM_INLINE("JNZ	_80891");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80891:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80899");
	ASM_INLINE("CMP	BX,0x0044");
ASM_INLINE("_80899:");
	ASM_INLINE("JNZ	_8089E");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_8089E:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808A6");
	ASM_INLINE("CMP	BX,0x0064");
ASM_INLINE("_808A6:");
	ASM_INLINE("JNZ	_808AB");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808AB:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808B3");
	ASM_INLINE("CMP	BX,0x0053");
ASM_INLINE("_808B3:");
	ASM_INLINE("JNZ	_808B8");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808B8:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808C0");
	ASM_INLINE("CMP	BX,0x0073");
ASM_INLINE("_808C0:");
	ASM_INLINE("JNZ	_808C5");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808C5:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808CD");
	ASM_INLINE("CMP	BX,0x0042");
ASM_INLINE("_808CD:");
	ASM_INLINE("JNZ	_808D2");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808D2:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808DA");
	ASM_INLINE("CMP	BX,0x0062");
ASM_INLINE("_808DA:");
	ASM_INLINE("JNZ	_808DF");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808DF:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808E7");
	ASM_INLINE("CMP	BX,0x0043");
ASM_INLINE("_808E7:");
	ASM_INLINE("JNZ	_808EC");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808EC:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_808F4");
	ASM_INLINE("CMP	BX,0x0063");
ASM_INLINE("_808F4:");
	ASM_INLINE("JNZ	_808F9");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_808F9:");
	ASM_INLINE("MOV	BX,[BP-0x0C].W");
	ASM_INLINE("MOV	AX,[BP-0x0A].W");
	ASM_INLINE("MOV	[BP-0x08].W,BX");
	ASM_INLINE("MOV	[BP-0x06].W,AX");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("MOV	[BP-0x0C].W,BX");
	ASM_INLINE("MOV	[BP-0x0A].W,AX");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("XOR	AH,AH");
	ASM_INLINE("XOR	BX,BX");
	ASM_INLINE("MOV	[BP-0x10].W,AX");
	ASM_INLINE("MOV	[BP-0x0E].W,BX");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80934");
	ASM_INLINE("CMP	BX,0x0058");
ASM_INLINE("_80934:");
	ASM_INLINE("JNZ	_80939");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80939:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80941");
	ASM_INLINE("CMP	BX,0x0078");
ASM_INLINE("_80941:");
	ASM_INLINE("JNZ	_80946");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80946:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8094E");
	ASM_INLINE("CMP	BX,0x0044");
ASM_INLINE("_8094E:");
	ASM_INLINE("JNZ	_80953");
	ASM_INLINE("JMP	_809D2");
ASM_INLINE("_80953:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8095B");
	ASM_INLINE("CMP	BX,0x0064");
ASM_INLINE("_8095B:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80965");
	ASM_INLINE("CMP	BX,0x0053");
ASM_INLINE("_80965:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8096F");
	ASM_INLINE("CMP	BX,0x0073");
ASM_INLINE("_8096F:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80979");
	ASM_INLINE("CMP	BX,0x0042");
ASM_INLINE("_80979:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80983");
	ASM_INLINE("CMP	BX,0x0062");
ASM_INLINE("_80983:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_8098D");
	ASM_INLINE("CMP	BX,0x0043");
ASM_INLINE("_8098D:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80997");
	ASM_INLINE("CMP	BX,0x0063");
ASM_INLINE("_80997:");
	ASM_INLINE("JZ	_809D2");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	AX,[BP-0x06].W");
	ASM_INLINE("MOV	[BP-0x04].W,BX");
	ASM_INLINE("MOV	[BP-0x02].W,AX");
	ASM_INLINE("MOV	BX,[BP-0x0C].W");
	ASM_INLINE("MOV	AX,[BP-0x0A].W");
	ASM_INLINE("MOV	[BP-0x08].W,BX");
	ASM_INLINE("MOV	[BP-0x06].W,AX");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("MOV	[BP-0x0C].W,BX");
	ASM_INLINE("MOV	[BP-0x0A].W,AX");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("XOR	AH,AH");
	ASM_INLINE("XOR	BX,BX");
	ASM_INLINE("MOV	[BP-0x10].W,AX");
	ASM_INLINE("MOV	[BP-0x0E].W,BX");
ASM_INLINE("_809D2:");
	ASM_INLINE("MOV	BX,[BP-0x04].W");
	ASM_INLINE("MOV	AX,[BP-0x02].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_809E0");
	ASM_INLINE("CMP	BX,-0x0001");
ASM_INLINE("_809E0:");
	ASM_INLINE("JNZ	_80A36");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	AX,[BP-0x06].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_809F0");
	ASM_INLINE("CMP	BX,-0x0001");
ASM_INLINE("_809F0:");
	ASM_INLINE("JNZ	_80A2C");
	ASM_INLINE("MOV	BX,[BP-0x0C].W");
	ASM_INLINE("MOV	AX,[BP-0x0A].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80A00");
	ASM_INLINE("CMP	BX,-0x0001");
ASM_INLINE("_80A00:");
	ASM_INLINE("JNZ	_80A18");
	ASM_INLINE("MOV	[BP-0x08].W,0x0020");
	ASM_INLINE("MOV	[BP-0x06].W,0x0000");
	ASM_INLINE("MOV	[BP-0x0C].W,0x0000");
	ASM_INLINE("MOV	[BP-0x0A].W,0x0000");
	ASM_INLINE("JMP	_80A6F");
ASM_INLINE("_80A18:");
	ASM_INLINE("MOV	[BP-0x08].W,0x0020");
	ASM_INLINE("MOV	[BP-0x06].W,0x0000");
	ASM_INLINE("SUB	[BP-0x0C].W,0x0030");
	ASM_INLINE("SBB	[BP-0x0A].W,0x0000");
	ASM_INLINE("JMP	_80A6F");
ASM_INLINE("_80A2C:");
	ASM_INLINE("SUB	[BP-0x0C].W,0x0030");
	ASM_INLINE("SBB	[BP-0x0A].W,0x0000");
	ASM_INLINE("JMP	_80A6F");
ASM_INLINE("_80A36:");
	ASM_INLINE("MOV	AX,[BP-0x08].W");
	ASM_INLINE("MOV	BX,[BP-0x06].W");
	ASM_INLINE("MOV	CX,0x000A");
	ASM_INLINE("MOV	DX,0x0000");
	ASM_INLINE("CALLF	0x000E, 0x9211"); //_LMUL
	ASM_INLINE("SUB	AX,0x01E0");
	ASM_INLINE("SBB	BX,0x0000");
	ASM_INLINE("MOV	DX,[BP-0x0C].W");
	ASM_INLINE("MOV	CX,[BP-0x0A].W");
	ASM_INLINE("SUB	DX,0x0030");
	ASM_INLINE("SBB	CX,0x0000");
	ASM_INLINE("ADD	AX,DX");
	ASM_INLINE("ADC	BX,CX");
	ASM_INLINE("MOV	[BP-0x0C].W,AX");
	ASM_INLINE("MOV	[BP-0x0A].W,BX");
	ASM_INLINE("MOV	BX,[BP-0x04].W");
	ASM_INLINE("MOV	AX,[BP-0x02].W");
	ASM_INLINE("MOV	[BP-0x08].W,BX");
	ASM_INLINE("MOV	[BP-0x06].W,AX");
ASM_INLINE("_80A6F:");
	ASM_INLINE("MOV	BX,[BP-0x10].W");
	ASM_INLINE("MOV	AX,[BP-0x0E].W");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80A7D");
	ASM_INLINE("CMP	BX,0x0058");
ASM_INLINE("_80A7D:");
	ASM_INLINE("JNZ	_80A82");
	ASM_INLINE("JMP	_80B6D");
ASM_INLINE("_80A82:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80A8A");
	ASM_INLINE("CMP	BX,0x0078");
ASM_INLINE("_80A8A:");
	ASM_INLINE("JNZ	_80A8F");
	ASM_INLINE("JMP	_80B5A");
ASM_INLINE("_80A8F:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80A97");
	ASM_INLINE("CMP	BX,0x0044");
ASM_INLINE("_80A97:");
	ASM_INLINE("JNZ	_80A9C");
	ASM_INLINE("JMP	_80B49");
ASM_INLINE("_80A9C:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80AA4");
	ASM_INLINE("CMP	BX,0x0064");
ASM_INLINE("_80AA4:");
	ASM_INLINE("JNZ	_80AA9");
	ASM_INLINE("JMP	_80B49");
ASM_INLINE("_80AA9:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80AB1");
	ASM_INLINE("CMP	BX,0x0053");
ASM_INLINE("_80AB1:");
	ASM_INLINE("JNZ	_80AB6");
	ASM_INLINE("JMP	_80B35");
ASM_INLINE("_80AB6:");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80ABE");
	ASM_INLINE("CMP	BX,0x0073");
ASM_INLINE("_80ABE:");
	ASM_INLINE("JZ	_80B22");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80AC8");
	ASM_INLINE("CMP	BX,0x0042");
ASM_INLINE("_80AC8:");
	ASM_INLINE("JZ	_80B11");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80AD2");
	ASM_INLINE("CMP	BX,0x0062");
ASM_INLINE("_80AD2:");
	ASM_INLINE("JZ	_80B11");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80ADC");
	ASM_INLINE("CMP	BX,0x0043");
ASM_INLINE("_80ADC:");
	ASM_INLINE("JZ	_80AFF");
	ASM_INLINE("CMP	AX,0x0000");
	ASM_INLINE("JNZ	_80AE6");
	ASM_INLINE("CMP	BX,0x0063");
ASM_INLINE("_80AE6:");
	ASM_INLINE("JZ	_80AEB");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80AEB:");
	ASM_INLINE("MOV	AL,[SI].B");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("MOV	DX,0x0001");
	ASM_INLINE("CALLF	chr2str_, SEG chr2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80AFF:");
	ASM_INLINE("MOV	AL,[SI].B");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("XOR	DX,DX");
	ASM_INLINE("CALLF	chr2str_, SEG chr2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B11:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("CALLF	bin2str_, SEG bin2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B22:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("XOR	DX,DX");
	ASM_INLINE("CALLF	str2str_, SEG str2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B35:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("MOV	DX,0x0001");
	ASM_INLINE("CALLF	str2str_, SEG str2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B49:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("CALLF	dec2str_, SEG dec2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B5A:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("XOR	DX,DX");
	ASM_INLINE("CALLF	hex2str_, SEG hex2str_");
	ASM_INLINE("JMP	_80B7F");
ASM_INLINE("_80B6D:");
	ASM_INLINE("MOV	AX,[SI].W");
	ASM_INLINE("INC	SI");
	ASM_INLINE("INC	SI");
	ASM_INLINE("MOV	BX,[BP-0x08].W");
	ASM_INLINE("MOV	CX,[BP-0x0C].W");
	ASM_INLINE("MOV	DX,0x0001");
	ASM_INLINE("CALLF	hex2str_, SEG hex2str_");
ASM_INLINE("_80B7F:");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("CMP	[BX].B,0x00");
	ASM_INLINE("JZ	_80BA1");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	DI,[0x094C].W");
	ASM_INLINE("DEC	DI");
	ASM_INLINE("INC	[0x094A].W");
	ASM_INLINE("MOV	BX,[0x094A].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BX].B");
	ASM_INLINE("MOV	[DI].B,AL");
	ASM_INLINE("JMP	_80784");
ASM_INLINE("_80BA1:");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("MOV	[BX].B,0x00");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
	ASM_INLINE("MOV	SP,BP");
	ASM_INLINE("POP	BP");
}

void chr2str()
{
	ASM_INLINE("PUSH	BP");
	ASM_INLINE("MOV	BP,SP");
	ASM_INLINE("SUB	SP,0x0002");
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("MOV	[BP-0x01].B,AL");
	ASM_INLINE("TEST	CX,CX");
	ASM_INLINE("JNZ	_80BC4");
	ASM_INLINE("MOV	AX,0x0001");
	ASM_INLINE("JMP	_80BC6");
ASM_INLINE("_80BC4:");
	ASM_INLINE("XOR	AX,AX");
ASM_INLINE("_80BC6:");
	ASM_INLINE("ADD	CX,AX");
	ASM_INLINE("DEC	CX");
	ASM_INLINE("JMP	_80BD6");
ASM_INLINE("_80BCB:");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	SI,[0x094C].W");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI].B,BL");
ASM_INLINE("_80BD6:");
	ASM_INLINE("DEC	CX");
	ASM_INLINE("MOV	AX,CX");
	ASM_INLINE("INC	AX");
	ASM_INLINE("JNZ	_80BCB");
	ASM_INLINE("TEST	DX,DX");
	ASM_INLINE("JZ	_80C08");
	ASM_INLINE("CMP	[BP-0x01].B,0x61");
	ASM_INLINE("JB	_80BF0");
	ASM_INLINE("CMP	[BP-0x01].B,0x7A");
	ASM_INLINE("JA	_80BF0");
	ASM_INLINE("MOV	AL,0x01");
	ASM_INLINE("JMP	_80BF2");
ASM_INLINE("_80BF0:");
	ASM_INLINE("XOR	AL,AL");
ASM_INLINE("_80BF2:");
	ASM_INLINE("MOV	BL,0x20");
	ASM_INLINE("MUL	BL");
	ASM_INLINE("MOV	CL,[BP-0x01].B");
	ASM_INLINE("SUB	CL,AL");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,CL");
	ASM_INLINE("JMP	_80C16");
ASM_INLINE("_80C08:");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AL,[BP-0x01].B");
	ASM_INLINE("MOV	[BX].B,AL");
ASM_INLINE("_80C16:");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	CX");
	ASM_INLINE("MOV	SP,BP");
	ASM_INLINE("POP	BP");
}

void bin2str()
{
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("PUSH	BX");
	ASM_INLINE("MOV	SI,[0x094C].W");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("MOV	DI,0x000E");
	ASM_INLINE("JMP	_80C2C");
ASM_INLINE("_80C2B:");
	ASM_INLINE("DEC	DI");
ASM_INLINE("_80C2C:");
	ASM_INLINE("XOR	SI,SI");
	ASM_INLINE("MOV	DX,AX");
	ASM_INLINE("MOV	BX,SEG bin_div_tbl_");
	ASM_INLINE("MOV	ES,BX");
	ASM_INLINE("MOV	BX,DI");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("SUB	DX,ES:[BX+0x0000].W");
	ASM_OP5(0x26,0x2B,0x97,0x00,0x00);
	//ASM_INLINE("SBB	SI,ES:[BX+0x0002].W");
	ASM_OP5(0x26,0x1B,0xB7,0x02,0x00);
	ASM_INLINE("JGE	_80C2B");
	ASM_INLINE("MOV	DX,0x000F");
	ASM_INLINE("SUB	DX,DI");
	ASM_INLINE("CMP	CX,DX");
	ASM_INLINE("JGE	_80C55");
	ASM_INLINE("MOV	CX,0x000F");
	ASM_INLINE("SUB	CX,DI");
ASM_INLINE("_80C55:");
	ASM_INLINE("POP	SI");
	ASM_INLINE("ADD	SI,CX");
	ASM_INLINE("ADD	[0x094C].W,CX");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI+0x01].B,0x00");
	ASM_INLINE("JMP	_80C72");
ASM_INLINE("_80C63:");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	DX,AX");
	ASM_INLINE("AND	DX,0x0001");
	ASM_INLINE("ADD	DX,0x0030");
	ASM_INLINE("MOV	[SI+0x01].B,DL");
	ASM_INLINE("SHR	AX,1");
ASM_INLINE("_80C72:");
	ASM_INLINE("DEC	CX");
	ASM_INLINE("MOV	DX,CX");
	ASM_INLINE("INC	DX");
	ASM_INLINE("JNZ	_80C63");
	ASM_INLINE("INC	SI");
	ASM_INLINE("POP	BX");
	ASM_INLINE("JMP	_80C7F");
ASM_INLINE("_80C7C:");
	ASM_INLINE("MOV	[SI].B,BL");
	ASM_INLINE("INC	SI");
ASM_INLINE("_80C7F:");
	ASM_INLINE("CMP	[SI].B,0x30");
	ASM_INLINE("JZ	_80C7C");
	ASM_INLINE("CMP	[SI].B,0x00");
	ASM_INLINE("JNZ	_80C8D");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI].B,0x30");
ASM_INLINE("_80C8D:");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
}

void str2str()
{
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("MOV	DI,AX");
	ASM_INLINE("MOV	SI,DI");
	ASM_INLINE("XOR	AX,AX");
	ASM_INLINE("JMP	_80C9E");
ASM_INLINE("_80C9D:");
	ASM_INLINE("INC	AX");
ASM_INLINE("_80C9E:");
	ASM_INLINE("PUSH	AX");
	ASM_INLINE("MOV	AL,[SI].B");
	ASM_INLINE("INC	SI");
	ASM_INLINE("TEST	AL,AL");
	ASM_INLINE("POP	AX");
	ASM_INLINE("JNZ	_80C9D");
	ASM_INLINE("JMP	_80CB4");
ASM_INLINE("_80CA9:");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	SI,[0x094C].W");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI].B,BL");
ASM_INLINE("_80CB4:");
	ASM_INLINE("DEC	CX");
	ASM_INLINE("MOV	SI,CX");
	ASM_INLINE("INC	SI");
	ASM_INLINE("CMP	AX,SI");
	ASM_INLINE("JL	_80CA9");
	ASM_INLINE("TEST	DX,DX");
	ASM_INLINE("JZ	_80CF2");
	ASM_INLINE("JMP	_80CEB");
ASM_INLINE("_80CC2:");
	ASM_INLINE("CMP	[DI].B,0x61");
	ASM_INLINE("JB	_80CD0");
	ASM_INLINE("CMP	[DI].B,0x7A");
	ASM_INLINE("JA	_80CD0");
	ASM_INLINE("MOV	AL,0x01");
	ASM_INLINE("JMP	_80CD2");
ASM_INLINE("_80CD0:");
	ASM_INLINE("XOR	AL,AL");
ASM_INLINE("_80CD2:");
	ASM_INLINE("MOV	BL,0x20");
	ASM_INLINE("MUL	BL");
	ASM_INLINE("MOV	CL,[DI].B");
	ASM_INLINE("SUB	CL,AL");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,CL");
	ASM_INLINE("CMP	[DI].B,0x00");
	ASM_INLINE("JZ	_80CEB");
	ASM_INLINE("INC	DI");
ASM_INLINE("_80CEB:");
	ASM_INLINE("CMP	[DI].B,0x00");
	ASM_INLINE("JNZ	_80CC2");
	ASM_INLINE("JMP	_80D08");
ASM_INLINE("_80CF2:");
	ASM_INLINE("MOV	AL,[DI].B");
	ASM_INLINE("INC	DI");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,AL");
	ASM_INLINE("TEST	AL,AL");
	ASM_INLINE("JNZ	_80CF2");
	ASM_INLINE("DEC	[0x094C].W");
ASM_INLINE("_80D08:");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	CX");
}

void dec2str()
{
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("MOV	SI,AX");
	ASM_INLINE("MOV	DI,BX");
	ASM_INLINE("MOV	DX,CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("CMP	SI,0x0000");
	ASM_INLINE("JGE	_80D21");
	ASM_INLINE("MOV	AX,0x0001");
	ASM_INLINE("JMP	_80D23");
ASM_INLINE("_80D21:");
	ASM_INLINE("XOR	AX,AX");
ASM_INLINE("_80D23:");
	ASM_INLINE("PUSH	AX");
	ASM_INLINE("CMP	SI,0x0000");
	ASM_INLINE("JGE	_80D2B");
	ASM_INLINE("NEG	SI");
ASM_INLINE("_80D2B:");
	ASM_INLINE("MOV	CX,0x0004");
	ASM_INLINE("JMP	_80D31");
ASM_INLINE("_80D30:");
	ASM_INLINE("DEC	CX");
ASM_INLINE("_80D31:");
	ASM_INLINE("MOV	AX,SI");
	ASM_INLINE("CWD");
	ASM_INLINE("MOV	BX,SEG dec_div_tbl_");
	ASM_INLINE("MOV	ES,BX");
	ASM_INLINE("MOV	BX,CX");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("SUB	AX,ES:[BX+0x0004].W");
	ASM_OP5(0x26,0x2B,0x87,0x04,0x00);
	//ASM_INLINE("SBB	DX,ES:[BX+0x0006].W");
	ASM_OP5(0x26,0x1B,0x97,0x06,0x00);
	ASM_INLINE("JGE	_80D30");
	ASM_INLINE("MOV	BX,0x0005");
	ASM_INLINE("SUB	BX,CX");
	ASM_INLINE("POP	AX");
	ASM_INLINE("ADD	BX,AX");
	ASM_INLINE("POP	DX");
	ASM_INLINE("CMP	DX,BX");
	ASM_INLINE("JGE	_80D5F");
	ASM_INLINE("MOV	DX,0x0005");
	ASM_INLINE("SUB	DX,CX");
	ASM_INLINE("ADD	DX,AX");
ASM_INLINE("_80D5F:");
	ASM_INLINE("PUSH	AX");
	ASM_INLINE("TEST	AX,AX");
	ASM_INLINE("JZ	_80D65");
	ASM_INLINE("DEC	DX");
ASM_INLINE("_80D65:");
	ASM_INLINE("MOV	CX,0x0006");
	ASM_INLINE("SUB	CX,DX");
	ASM_INLINE("TEST	AX,AX");
	ASM_INLINE("JZ	_80D90");
	ASM_INLINE("CMP	DI,0x0030");
	ASM_INLINE("JNZ	_80D90");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,0x2D");
	ASM_INLINE("JMP	_80D90");
ASM_INLINE("_80D81:");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	AX,DI");
	ASM_INLINE("MOV	[BX].B,AL");
	ASM_INLINE("INC	CX");
	ASM_INLINE("DEC	DX");
ASM_INLINE("_80D90:");
	ASM_INLINE("CMP	DX,0x0001");
	ASM_INLINE("JLE	_80DB1");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("MOV	AX,SI");
	ASM_INLINE("CWD");
	ASM_INLINE("MOV	BX,0xA06E");
	ASM_INLINE("MOV	ES,BX");
	ASM_INLINE("MOV	BX,CX");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("SUB	AX,ES:[BX+0x0004].W");
	ASM_OP5(0x26,0x2B,0x87,0x04,0x00);
	//ASM_INLINE("SBB	DX,ES:[BX+0x0006].W");
	ASM_OP5(0x26,0x1B,0x97,0x06,0x00);
	ASM_INLINE("POP	DX");
	ASM_INLINE("JL	_80D81");
ASM_INLINE("_80DB1:");
	ASM_INLINE("POP	AX");
	ASM_INLINE("TEST	AX,AX");
	ASM_INLINE("JZ	_80E06");
	ASM_INLINE("CMP	DI,0x0030");
	ASM_INLINE("JZ	_80E06");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,0x2D");
	ASM_INLINE("JMP	_80E06");
ASM_INLINE("_80DC9:");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("XOR	DX,DX");
ASM_INLINE("_80DCC:");
	ASM_INLINE("MOV	AX,0xA06E");
	ASM_INLINE("MOV	ES,AX");
	ASM_INLINE("MOV	BX,CX");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("SUB	SI,ES:[BX+0x0004].W");
	ASM_OP5(0x26,0x2B,0xB7,0x04,0x00);
	ASM_INLINE("INC	DX");
	ASM_INLINE("CMP	SI,0x0000");
	ASM_INLINE("JGE	_80DCC");
	ASM_INLINE("MOV	AX,0xA06E");
	ASM_INLINE("MOV	ES,AX");
	ASM_INLINE("MOV	BX,CX");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("ADD	SI,ES:[BX+0x0004].W");
	ASM_OP5(0x26,0x03,0xB7,0x04,0x00);
	ASM_INLINE("DEC	DX");
	ASM_INLINE("MOV	AX,0x0030");
	ASM_INLINE("ADD	AX,DX");
	ASM_INLINE("INC	[0x094C].W");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("DEC	BX");
	ASM_INLINE("MOV	[BX].B,AL");
	ASM_INLINE("INC	CX");
	ASM_INLINE("POP	DX");
	ASM_INLINE("DEC	DX");
ASM_INLINE("_80E06:");
	ASM_INLINE("CMP	DX,0x0000");
	ASM_INLINE("JG	_80DC9");
	ASM_INLINE("MOV	BX,[0x094C].W");
	ASM_INLINE("MOV	[BX].B,0x00");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
}

void hex2str()
{
	ASM_INLINE("PUSH	CX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("PUSH	DI");
	ASM_INLINE("MOV	DI,AX");
	ASM_INLINE("PUSH	BX");
	ASM_INLINE("PUSH	DX");
	ASM_INLINE("MOV	SI,[0x094C].W");
	ASM_INLINE("PUSH	SI");
	ASM_INLINE("MOV	SI,0x0003");
	ASM_INLINE("JMP	_80E2A");
ASM_INLINE("_80E29:");
	ASM_INLINE("DEC	SI");
ASM_INLINE("_80E2A:");
	ASM_INLINE("MOV	AX,DI");
	ASM_INLINE("CWD");
	ASM_INLINE("MOV	BX,SEG hex_div_tbl_");
	ASM_INLINE("MOV	ES,BX");
	ASM_INLINE("MOV	BX,SI");
	ASM_INLINE("SHL	BX,1");
	ASM_INLINE("SHL	BX,1");
	//ASM_INLINE("SUB	AX,ES:[BX+0x000C].W");
	ASM_OP5(0x26,0x2B,0x87,0x0C,0x00);
	//ASM_INLINE("SBB	DX,ES:[BX+0x000E].W");
	ASM_OP5(0x26,0x1B,0x97,0x0E,0x00);
	ASM_INLINE("JGE	_80E29");
	ASM_INLINE("MOV	AX,0x0004");
	ASM_INLINE("SUB	AX,SI");
	ASM_INLINE("CMP	CX,AX");
	ASM_INLINE("JGE	_80E52");
	ASM_INLINE("MOV	CX,0x0004");
	ASM_INLINE("SUB	CX,SI");
ASM_INLINE("_80E52:");
	ASM_INLINE("POP	SI");
	ASM_INLINE("ADD	SI,CX");
	ASM_INLINE("ADD	[0x094C].W,CX");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI+0x01].B,0x00");
	ASM_INLINE("POP	DX");
	ASM_INLINE("JMP	_80E97");
ASM_INLINE("_80E61:");
	ASM_INLINE("TEST	DX,DX");
	ASM_INLINE("JZ	_80E7B");
	ASM_INLINE("MOV	AX,SEG HEX_num_tbl_");
	ASM_INLINE("MOV	ES,AX");
	ASM_INLINE("MOV	BX,DI");
	ASM_INLINE("AND	BX,0x000F");
	//ASM_INLINE("MOV	AL,ES:[BX+0x0002].B");
	ASM_OP5(0x26,0x8A,0x87,0x02,0x00);
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI+0x01].B,AL");
	ASM_INLINE("JMP	_80E8F");
ASM_INLINE("_80E7B:");
	ASM_INLINE("MOV	AX,SEG hex_num_tbl_");
	ASM_INLINE("MOV	ES,AX");
	ASM_INLINE("MOV	BX,DI");
	ASM_INLINE("AND	BX,0x000F");
	//ASM_INLINE("MOV	AL,ES:[BX+0x0000].B");
	ASM_OP5(0x26,0x8A,0x87,0x00,0x00);
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI+0x01].B,AL");
ASM_INLINE("_80E8F:");
	ASM_INLINE("SAR	DI,1");
	ASM_INLINE("SAR	DI,1");
	ASM_INLINE("SAR	DI,1");
	ASM_INLINE("SAR	DI,1");
ASM_INLINE("_80E97:");
	ASM_INLINE("DEC	CX");
	ASM_INLINE("MOV	AX,CX");
	ASM_INLINE("INC	AX");
	ASM_INLINE("JNZ	_80E61");
	ASM_INLINE("INC	SI");
	ASM_INLINE("POP	BX");
	ASM_INLINE("JMP	_80EA4");
ASM_INLINE("_80EA1:");
	ASM_INLINE("MOV	[SI].B,BL");
	ASM_INLINE("INC	SI");
ASM_INLINE("_80EA4:");
	ASM_INLINE("CMP	[SI].B,0x30");
	ASM_INLINE("JZ	_80EA1");
	ASM_INLINE("CMP	[SI].B,0x00");
	ASM_INLINE("JNZ	_80EB2");
	ASM_INLINE("DEC	SI");
	ASM_INLINE("MOV	[SI].B,0x30");
ASM_INLINE("_80EB2:");
	ASM_INLINE("POP	DI");
	ASM_INLINE("POP	SI");
	ASM_INLINE("POP	DX");
	ASM_INLINE("POP	CX");
}

